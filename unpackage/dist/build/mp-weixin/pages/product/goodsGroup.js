(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/product/goodsGroup"],{"1c5a":function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(o("a34a")),s=(r(o("72de")),o("26cb"));function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function a(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?i(Object(o),!0).forEach((function(t){c(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function c(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function u(e,t,o,n,s,r,i){try{var a=e[r](i),c=a.value}catch(u){return void o(u)}a.done?t(c):Promise.resolve(c).then(n,s)}function l(e){return function(){var t=this,o=arguments;return new Promise((function(n,s){var r=e.apply(t,o);function i(e){u(r,n,s,i,a,"next",e)}function a(e){u(r,n,s,i,a,"throw",e)}i(void 0)}))}}var f=function(){Promise.all([o.e("common/vendor"),o.e("components/pretty-times/pretty-times")]).then(function(){return resolve(o("7092"))}.bind(null,o)).catch(o.oe)},d=function(){o.e("components/share").then(function(){return resolve(o("8d8e"))}.bind(null,o)).catch(o.oe)},p={components:{share:d,times:f},data:function(){return{specClass:"none",specSelected:[],goodsGroupOne:[],glist:[],favorite:!0,shareList:[],imgList:[],desc:"",specList:[],specChildList:[],buyinfo:[],from:2,begin_time:"",end_time:"",button:!0,canbuy:!0,appointTime:["2021-11-16 15:30:00"],disableTimeSlot:[]}},onLoad:function(e){var t=this;return l(n.default.mark((function o(){var s;return n.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return console.log("test"),s=e.id,t.loadGoodsGroup(s),o.next=5,t.$api.json("shareList");case 5:t.shareList=o.sent,console.log("goods");case 7:case"end":return o.stop()}}),o)})))()},computed:a({},(0,s.mapState)(["hasLogin","userInfo"])),methods:a(a({},(0,s.mapMutations)(["editCart"])),{},{loadGoodsGroup:function(e){var t=this;return l(n.default.mark((function o(){var s,r,i,a;return n.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return console.log("应该把用户信息传过去如果有则获取收藏的"),console.log(JSON.stringify(t.userInfo)),s=t.userInfo,r={id:e,userInfo:s},o.next=6,t.$myRequest({url:"/api/goodsgroup/goodsGroupOne",method:"post",data:r});case 6:i=o.sent,console.log("商品页"),console.log(i.data),t.goodsGroupOne=i.data.res,a=JSON.parse(i.data.res.goodslist),t.glist=[],a.forEach((function(e){t.glist.push(e)})),t.disableTimeSlot=i.data.reserve,console.log("this.glist"),console.log(t.glist),t.desc=i.data.res.content,t.favorite=i.data.res.collection;case 18:case"end":return o.stop()}}),o)})))()},toggleSpec:function(){var e=this;"show"===this.specClass?(this.specClass="hide",setTimeout((function(){e.specClass="none"}),250)):"none"===this.specClass&&(this.specClass="show")},share:function(){this.$refs.share.toggleMask()},toFavorite:function(){var t=this;return l(n.default.mark((function o(){var s,r,i,a;return n.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(t.if_login(),console.log("收藏与否:"),console.log("this.goodsGroupOne:"+JSON.stringify(t.goodsGroupOne)),console.log(t.favorite),console.log(t.hasLogin),t.hasLogin){o.next=10;break}return console.log("没有登陆。请登陆！"),t.$api.msg("登陆后再收藏"),e.navigateTo({url:"/pages/public/login"}),o.abrupt("return");case 10:return s=t.goodsGroupOne,r=t.userInfo,i={goodsGroupOne:s,userInfo:r},o.next=15,t.$myRequest({url:"/api/goodsgroup/collectionGoodsGroup",method:"post",data:i});case 15:a=o.sent,console.log(a.data),1==a.data.res.fav?(t.$api.msg("收藏了"),t.favorite=!0):(t.$api.msg("取消收藏"),t.favorite=!1);case 18:case"end":return o.stop()}}),o)})))()},if_login:function(){if(!this.hasLogin)return console.log("没有登陆。请登陆！"),this.$api.msg("登陆后再收藏"),void e.navigateTo({url:"/pages/public/login"})},getTime:function(t){if("show"===this.specClass){console.log(t.beginTime),console.log(t.endTime),this.begin_time=t.beginTime;var o=[],n=this.goodsGroupOne,s=this.userInfo,r=(this.buyinfo,this.from),i=t;this.glist;console.log("begin_time"),console.log(i),o={id:n.id,number:1},console.log("goodsData::::"+JSON.stringify(o)),e.navigateTo({url:"/pages/order/createOrder?data=".concat(JSON.stringify({goodsData:o,userInfo:s,from:r,startTime:i}))})}else"none"===this.specClass&&(this.specClass="show")},buy:function(){if(this.if_login(),console.log("buy?"),!this.canbuy)return this.$api.msg("暂时不能预定哦"),0;""!==this.begin_time||(this.specClass="show")},stopPrevent:function(){}})};t.default=p}).call(this,o("543d")["default"])},6532:function(e,t,o){"use strict";var n;o.d(t,"b",(function(){return s})),o.d(t,"c",(function(){return r})),o.d(t,"a",(function(){return n}));var s=function(){var e=this,t=e.$createElement;e._self._c},r=[]},"65ae":function(e,t,o){"use strict";(function(e){o("251e");n(o("66fd"));var t=n(o("996f"));function n(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=o,e(t.default)}).call(this,o("543d")["createPage"])},"996f":function(e,t,o){"use strict";o.r(t);var n=o("6532"),s=o("9b6e");for(var r in s)"default"!==r&&function(e){o.d(t,e,(function(){return s[e]}))}(r);o("b312");var i,a=o("f0c5"),c=Object(a["a"])(s["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],i);t["default"]=c.exports},"9b6e":function(e,t,o){"use strict";o.r(t);var n=o("1c5a"),s=o.n(n);for(var r in n)"default"!==r&&function(e){o.d(t,e,(function(){return n[e]}))}(r);t["default"]=s.a},b312:function(e,t,o){"use strict";var n=o("f323"),s=o.n(n);s.a},f323:function(e,t,o){}},[["65ae","common/runtime","common/vendor"]]]);