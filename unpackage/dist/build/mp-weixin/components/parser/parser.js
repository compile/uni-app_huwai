(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/parser/parser"],{"1a0b":function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}));var s=function(){var t=this,e=t.$createElement;t._self._c},a=[]},"21d7":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i,s=function(){n.e("components/parser/libs/trees").then(function(){return resolve(n("740d"))}.bind(null,n)).catch(n.oe)},a=n("8939"),o=getApp().parserCache={},r=n("f893");function l(t){for(var e=t.length,n=5381;e--;)n+=(n<<5)+t.charCodeAt(e);return n}var h=t.createAnimation({timingFunction:"ease"}).opacity(1).step().export(),c=n("765e");function u(t){if(0!=t.indexOf("http"))return t;for(var e="",n=0;n<t.length;n++)if(e+=Math.random()>=.5?t[n].toUpperCase():t[n].toLowerCase(),"/"==t[n]&&"/"!=t[n-1]&&"/"!=t[n+1])break;return e+=t.substring(n+1),e}var d={name:"parser",data:function(){return{showAnimation:"",controls:{},nodes:[]}},components:{trees:s},props:{html:{type:null,default:null},autopause:{type:Boolean,default:!0},autosetTitle:{type:Boolean,default:!0},domain:{type:String,default:null},gestureZoom:{type:Boolean,default:!1},lazyLoad:{type:Boolean,default:!1},selectable:{type:Boolean,default:!1},tagStyle:{type:Object,default:function(){return{}}},showWithAnimation:{type:Boolean,default:!1},useAnchor:{type:Boolean,default:!1},useCache:{type:Boolean,default:!1}},watch:{html:function(t){this.setContent(t,void 0,!0)}},mounted:function(){this.imgList=[],this.imgList.each=function(t){for(var e=0;e<this.length;e++){var n=t(this[e],e,this);n&&(this.includes(n)?this[e]=u(n):this[e]=n)}},this.setContent(this.html,void 0,!0)},methods:{setContent:function(e,n,s){var d=this;if("object"==typeof n)for(var f in n)f=f.replace(/-(\w)/g,(function(t,e){return e.toUpperCase()})),this[f]=n[f];if(this.showWithAnimation&&(this.showAnimation=h),e)if("string"==typeof e){if(this.useCache){var m=l(e);o[m]?this.nodes=o[m]:(this.nodes=a(e,this),o[m]=this.nodes)}else this.nodes=a(e,this);this.$emit("parse",this.nodes)}else if("[object Array]"==Object.prototype.toString.call(e)){if(this.nodes=s?[]:e,e.length&&"Parser"!=e[0].PoweredBy){var p=function t(e){for(var n,i=0;n=e[i++];)if("text"!=n.type){for(var s in n.attrs=n.attrs||{},n.attrs)c.trustAttrs[s]?"string"!=typeof n.attrs[s]&&(n.attrs[s]=n.attrs[s].toString()):n.attrs[s]=void 0;c.LabelAttrsHandler(n,g),c.blockTags[n.name]?n.name="div":c.trustTags[n.name]||(n.name="span"),n.children&&n.children.length?(g._STACK.push(n),t(n.children),g._STACK.pop()):n.children=void 0}},g={_imgNum:0,_videoNum:0,_audioNum:0,_domain:this.domain,_protocol:this.domain?this.domain.includes("://")?this.domain.split("://")[0]:"http":void 0,_STACK:[],CssHandler:new r(this.tagStyle)};g.CssHandler.getStyle(""),p(e),this.nodes=e}}else{if("object"!=typeof e||!e.nodes)return this.$emit("error",{source:"parse",errMsg:"传入的nodes数组格式不正确！应该传入的类型是array，实际传入的类型是："+typeof e.nodes});this.nodes=e.nodes,console.warn("Parser 类型错误：object 类型已废弃，请直接将 html 设置为 object.nodes （array 类型）")}else{if(s)return;this.nodes=[]}i&&(this.document=new i("html",this.html||e,this)),this.$nextTick((function(){d.imgList.length=0,d.videoContexts=[];var e=function e(n){for(var i=function(){var i=n[s];if("trees"==i.$options.name)for(a=!1,o=i.nodes.length;r=i.nodes[--o];)r.c||("img"==r.name?(r.attrs.src&&r.attrs.i&&(-1==d.imgList.indexOf(r.attrs.src)?d.imgList[r.attrs.i]=r.attrs.src:d.imgList[r.attrs.i]=u(r.attrs.src)),a||(a=!0,d.lazyLoad&&t.createIntersectionObserver?(i._observer&&i._observer.disconnect(),i._observer=t.createIntersectionObserver(i),i._observer.relativeToViewport({top:1e3,bottom:1e3}).observe("._img",(function(t){i.imgLoad=!0,i._observer.disconnect(),i._observer=null}))):i.imgLoad=!0)):"video"==r.name?(l=t.createVideoContext(r.attrs.id,i),l.id=r.attrs.id,d.videoContexts.push(l)):"audio"==r.name&&r.attrs.autoplay?wx.createAudioContext(r.attrs.id,i).play():"title"==r.name&&d.autosetTitle&&"text"==r.children[0].type&&r.children[0].text&&t.setNavigationBarTitle({title:r.children[0].text}));i.$children.length&&e(i.$children)},s=n.length;s--;){var a,o,r,l;i()}};e(d.$children),d.createSelectorQuery().select("._contain").boundingClientRect().exec((function(t){d.width=(t[0]?t[0]:t).width,d.$emit("ready",t)}))}))},getText:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e="",n=function n(i){if("text"==i.type)return e+=i.text;if(t&&(("p"==i.name||"div"==i.name||"tr"==i.name||"li"==i.name||/h[1-6]/.test(i.name))&&e&&"\n"!=e[e.length-1]||"br"==i.name)&&(e+="\n"),i.children)for(var s=0;s<i.children.length;s++)n(i.children[s]);t&&("p"==i.name||"div"==i.name||"tr"==i.name||"li"==i.name||/h[1-6]/.test(i.name))&&e&&"\n"!=e[e.length-1]?e+="\n":t&&"td"==i.name&&(e+="\t")},i=this.nodes&&this.nodes.length?this.nodes:this.html[0]&&(this.html[0].name||this.html[0].type)?this.html:[];if(!i.length)return"";for(var s=0;s<this.data.html.length;s++)n(this.data.html[s]);return e},navigateTo:function(e){var n=this;if(e.fail=e.fail||function(){},!this.useAnchor)return e.fail({errMsg:"Use-anchor attribute is disabled"});var i=function(i,s){var a=t.createSelectorQuery().in(s||n);a.select(i).boundingClientRect(),a.selectViewport().scrollOffset(),a.exec((function(n){if(!n||!n[0])return e.fail({errMsg:"Label not found"});t.pageScrollTo({scrollTop:n[1].scrollTop+n[0].top,success:e.success,fail:e.fail})}))};e.id?i("._contain >>> #"+e.id+", ._contain >>> ."+e.id):i("._contain")},tap:function(e){if(this.gestureZoom&&e.timeStamp-this.lastTime<300){if(this.zoomIn)this.animation.translateX(0).scale(1).step(),t.pageScrollTo({scrollTop:(e.touches[0].pageY-e.currentTarget.offsetTop+this.initY)/2-e.touches[0].clientY,duration:400});else{var n=e.touches[0].pageX-e.currentTarget.offsetLeft;this.initY=e.touches[0].pageY-e.currentTarget.offsetTop,this.animation=t.createAnimation({transformOrigin:n+"px "+this.initY+"px 0",timingFunction:"ease-in-out"}),this.animation.scale(2).step(),this.translateMax=n/2,this.translateMin=(n-this.width)/2,this.translateX=0}this.zoomIn=!this.zoomIn,this.showAnimation=this.animation.export()}this.lastTime=e.timeStamp},touchstart:function(t){1==t.touches.length&&(this.initX=this.lastX=t.touches[0].pageX)},touchmove:function(t){var e=t.touches[0].pageX-this.lastX;if(this.zoomIn&&1==t.touches.length&&Math.abs(e)>20){if(this.lastX=t.touches[0].pageX,this.translateX<=this.translateMin&&e<0||this.translateX>=this.translateMax&&e>0)return;this.translateX+=e*Math.abs(this.lastX-this.initX)*.05,this.translateX<this.translateMin&&(this.translateX=this.translateMin),this.translateX>this.translateMax&&(this.translateX=this.translateMax),this.animation.translateX(this.translateX).step(),this.showAnimation=this.animation.export()}},getVideoContext:function(t){if(!t)return this.videoContexts;for(var e=this.videoContexts.length;e--;)if(this.videoContexts[e].id==t)return this.videoContexts[e];return null}}};e.default=d}).call(this,n("543d")["default"])},"9bb6":function(t,e,n){"use strict";n.r(e);var i=n("21d7"),s=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=s.a},acfa:function(t,e,n){"use strict";n.r(e);var i=n("1a0b"),s=n("9bb6");for(var a in s)"default"!==a&&function(t){n.d(e,t,(function(){return s[t]}))}(a);n("cd42");var o,r=n("f0c5"),l=Object(r["a"])(s["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);e["default"]=l.exports},cd42:function(t,e,n){"use strict";var i=n("ee1c5"),s=n.n(i);s.a},ee1c5:function(t,e,n){}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/parser/parser-create-component',
    {
        'components/parser/parser-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("acfa"))
        })
    },
    [['components/parser/parser-create-component']]
]);
