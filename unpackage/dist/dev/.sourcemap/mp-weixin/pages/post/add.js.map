{"version":3,"sources":["uni-app:///main.js","webpack:////Volumes/50/shequapp/户外_租时间版/pages/post/add.vue?38e7","webpack:////Volumes/50/shequapp/户外_租时间版/pages/post/add.vue?b3e6","webpack:////Volumes/50/shequapp/户外_租时间版/pages/post/add.vue?50f2","webpack:////Volumes/50/shequapp/户外_租时间版/pages/post/add.vue?4d02","uni-app:///pages/post/add.vue","webpack:////Volumes/50/shequapp/户外_租时间版/pages/post/add.vue?c25b","webpack:////Volumes/50/shequapp/户外_租时间版/pages/post/add.vue?6f3a"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,wF,6FAFmBA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC;AAGnBC,UAAU,CAACC,YAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA4H;AAC5H;AACuD;AACL;AACsC;;;AAGxF;AAC6M;AAC7M,gBAAgB,iNAAU;AAC1B,EAAE,yEAAM;AACR,EAAE,0FAAM;AACR,EAAE,mGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,8FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,oPAEN;AACP,KAAK;AACL;AACA,aAAa,uMAEN;AACP,KAAK;AACL;AACA,aAAa,iPAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC3CA;AAAA;AAAA;AAAA;AAAkzB,CAAgB,iyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACqDt0B;;;AAGA;AACA,qF;AACA;AACA,UADA;AAEA,SAFA;AAGA,mBAHA;;AAKA;AACA,cADA;AAEA,YAFA;AAGA,0BAHA,E;;AAKA;AACA;AACA,sEADA,CADA;;AAIA,MAJA,kBAIA;AACA;AACA,mBADA;AAEA,mBAFA;AAGA,uDAHA;AAIA,uBAJA;AAKA,qBALA;AAMA;AACA,iBADA;AAEA,iBAFA;AAGA,kBAHA;AAIA,oBAJA;AAKA,gBALA;AAMA,QANA,CANA;;AAcA;AACA,iBADA;AAEA,eAFA;AAGA,oBAHA;AAIA,sBAJA;AAKA,mBALA;AAMA,iBANA;AAOA,qBAPA;AAQA,oBARA;AASA,mBATA;AAUA,mBAVA,EAdA;;AA0BA;AACA,0CADA,EA1BA;;AA6BA,mBA7BA;;AA+BA,wBA/BA;AAgCA,uCAhCA;AAiCA,sBAjCA;AAkCA,qCAlCA;AAmCA,mBAnCA;AAoCA,wCApCA;AAqCA,mBArCA;;AAuCA,GA5CA;AA6CA,QA7CA,kBA6CA,OA7CA,EA6CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAjEA;AAkEA;AACA,YADA,sBACA;AACA;AACA;AACA;AACA,oCADA;;AAGA;AACA;AACA,KATA;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDADA;AAEA,8CAFA;AAGA;AACA,mCAJA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDADA,CACA;AACA;AACA;AACA;AACA,yCADA,CACA;AACA;AACA;AACA;AACA;AACA,aANA;;;AASA,WAbA;AAcA,SA3BA;;AA6BA,KA7CA;AA8CA;AACA;AACA;AACA;AACA,wBADA;AAEA,4BAFA;;AAIA,KArDA;AAsDA,UAtDA,kBAsDA,KAtDA,EAsDA,CAtDA,EAsDA;AACA;AACA;AACA,mBADA;AAEA,2BAFA;AAGA;AACA;AACA;AADA,gBAEA,aAFA,GAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aATA;AAUA;AACA;AACA;AACA;AACA;AACA;AACA,SApBA;;AAsBA,KA9EA;AA+EA,eA/EA,yBA+EA;AACA;AACA;AACA,gBADA;AAEA,uCAFA;AAGA;AACA;AACA;AACA,sBADA;AAEA,wBAFA;;AAIA;AACA,2BAPA,CAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0EAnBA,CAmBA;AACA;AACA;;;;AAIA;AACA,0CADA,CACA;AACA,uCAFA,CAEA;AACA;AACA,WAJA;AAKA;AACA,wEA/BA,CA+BA;AACA;AACA;AACA,uCADA,CACA;AACA,sCAFA,CAEA;AACA,8BAHA,CAGA;AACA,WAJA;AAKA,SAzCA;;AA2CA,KA5HA;AA6HA,aA7HA,uBA6HA;AACA;AACA,KA/HA;AAgIA,SAhIA,mBAgIA;AACA;AACA,KAlIA;AAmIA,aAnIA,uBAmIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,kBADA;AAEA,oBAFA;;AAIA;AACA,KAnJA;AAoJA,kBApJA,4BAoJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SATA;;AAWA,KAjKA;AAkKA,eAlKA,yBAkKA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBADA;AAEA,oBAFA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DADA;;AAGA;AACA;AACA,OAPA;AAQA,KA5LA;AA6LA,UA7LA,oBA6LA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBADA;AAEA,oBAFA;;;AAKA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,yDADA;;AAGA;AACA;AACA,OAPA;AAQA,KA7NA,EAlEA,E;;;;;;;;;;;;;ACpEA;AAAA;AAAA;AAAA;AAA6hD,CAAgB,w7CAAG,EAAC,C;;;;;;;;;;;ACAjjD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/post/add.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/post/add.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./add.vue?vue&type=template&id=2fc6e32b&scoped=true&\"\nvar renderjs\nimport script from \"./add.vue?vue&type=script&lang=js&\"\nexport * from \"./add.vue?vue&type=script&lang=js&\"\nimport style0 from \"./add.vue?vue&type=style&index=0&id=2fc6e32b&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2fc6e32b\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/post/add.vue\"\nexport default component.exports","export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./add.vue?vue&type=template&id=2fc6e32b&scoped=true&\"","var components\ntry {\n  components = {\n    uniIcons: function() {\n      return import(\n        /* webpackChunkName: \"components/uni-icons/uni-icons\" */ \"@/components/uni-icons/uni-icons.vue\"\n      )\n    },\n    uIcon: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-icon/u-icon\" */ \"@/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    qButton: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/q-view/components/q-button/q-button\" */ \"@/uni_modules/q-view/components/q-button/q-button.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./add.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./add.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"container\">\r\n\t\t<input v-model=\"form.title\" class=\"title-input\" placeholder=\"标题(选填)\" />\r\n\t\t<textarea placeholder=\"这一刻的想法...\" :auto-height=\"true\" maxlength=\"-1\" v-model=\"form.content\" class=\"post-txt\"></textarea>\r\n\t\t<block v-if=\"form.type == 1\">\n\t\t<!-- 上传图片 -->\r\n\t\n\t\t\n\t\t                <view class=\"u-upload uni-upload-img uni-flex uni-row\">\n\t\t                    <view class=\"u-list-item u-preview-wrap flex-item preview_img\" v-for=\"(image,index) in imageList\" :key=\"index\">\n\t\t                        <image class=\"uni-uploader__img\" :src=\"image\" :data-src=\"image\" @tap=\"previewImage\"></image>\n\t\t                        <uni-icons type=\"clear\" size=\"20\" class=\"u-delete-icon u-icon img_icon\" @tap=\"delect(index)\"></uni-icons>\n\t\t                    </view>\n\t\t\t\t\t\t\t<view v-if=\"imgAllUrl.length <=8 \" class=\"u-upload uni-upload-img uni-flex uni-row\" @tap=\"addPic\">\n\t\t\t\t\t\t\t\t<image class=\"icon uni-uploader__img\" src=\"/static/add-1.png\"></image>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</view>\n\t\t                </view>\n\t\t</block>\t\t\t\t\t\r\n\t\t<!-- 上传视频 -->\r\n\t\t<block v-if=\"form.type == 2\">\r\n\t\t\t<view v-if=\"form.media.length == 0\" class=\"upload-wrap\" @click=\"chooseVideo\">\r\n\t\t\t\t<image class=\"icon\" src=\"/static/video.png\"></image>\r\n\t\t\t\t<text>上传视频</text>\r\n\t\t\t</view>\r\n\t\t\t<video v-if=\"form.media.length > 0\" @click=\"chooseVideo\" :controls=\"false\" :show-center-play-btn=\"false\" class=\"upload-video\" :src=\"form.media[0]\"></video>\r\n\t\t</block>\r\n\t\t<!-- 选择圈子 -->\r\n\t\t<navigator v-if=\"isTopic\" url=\"/pages/choose-topic/choose-topic\" class=\"choose-item\">\r\n\t\t\t<image class=\"icon\" src=\"/static/p_1.png\"></image>\r\n\t\t\t<text class=\"txt\">{{ topicName }}</text>\r\n\t\t\t<u-icon class=\"u-icon\" name=\"arrow-right\"></u-icon>\r\n\t\t</navigator>\r\n\t\t<!-- 选择话题 -->\r\n\t\t<!-- <navigator v-if=\"!isTopic\" :url=\"'/pages/choose-discuss/choose-discuss?topic_id=' + form.topic_id\" class=\"choose-item\">\r\n\t\t\t<image class=\"icon\" src=\"/static/m_1.png\"></image>\r\n\t\t\t<text class=\"txt\">{{ disName }}</text>\r\n\t\t\t<u-icon class=\"u-icon\" name=\"arrow-right\"></u-icon>\r\n\t\t</navigator> -->\r\n\t\t<!-- 所在位置 -->\r\n\t\t<view @click=\"chooseLocation\" class=\"choose-item\">\r\n\t\t\t<u-icon class=\"icon add-icon\" name=\"map\" color=\"#999\" size=\"40\"></u-icon>\r\n\t\t\t<text class=\"txt\">{{ form.address || '所在位置' }}</text>\r\n\t\t\t<u-icon class=\"u-icon\" name=\"arrow-right\"></u-icon>\r\n\t\t</view>\r\n\t\t<view class=\"submit-btn\">\r\n\t\t\t<q-button v-if=\"form.type == 1\" @click=\"submit\" shape=\"circle\">发布</q-button>\r\n\t\t\t<q-button v-if=\"form.type == 2\" @click=\"videoSubmit\" shape=\"circle\">发布</q-button>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\nimport {\n\t    mapState \n} from 'vuex';  \nimport Sparkmd5 from '@/common/spark-md5.js';\nimport util from '@/common/util.js';\nvar sourceType = [\n            ['camera'],\n            ['album'],\n            ['camera', 'album']\n        ]\n    var sizeType = [\n        ['compressed'],\n        ['original'],\n        ['compressed', 'original']\n    ]\r\nexport default {\n\tcomputed: {\n\t\t...mapState(['hasLogin','userInfo','hasCart','cartInfo'])\n\t},\r\n\tdata() {\r\n\t\treturn {\n\t\t\timageList: [],\n\t\t\timagecount: 0,\r\n\t\t\tuploadImgUrl: this.$c.domain + 'common/uploadimg',\r\n\t\t\ttopicName: '选择圈子',\r\n\t\t\tdisName: '选择话题',\n\t\t\tvideoInfo: {\n\t\t\t\tthumb: '',\n\t\t\t\twidth: '',\n\t\t\t\theight: '',\n\t\t\t\tduration: '',\n\t\t\t\tsize: '',\n\t\t\t\twidth: '',\n\t\t\t},\r\n\t\t\tform: {\r\n\t\t\t\ttitle: '',\r\n\t\t\t\ttype: 1,\r\n\t\t\t\ttopic_id: '',\r\n\t\t\t\tdiscuss_id: '',\r\n\t\t\t\tcontent: '',\r\n\t\t\t\tmedia: [],\n\t\t\t\tvideoInfo: '',\r\n\t\t\t\tlongitude: 0,\r\n\t\t\t\tlatitude: 0,\r\n\t\t\t\taddress: ''\r\n\t\t\t},\r\n\t\t\theader: {\r\n\t\t\t\ttoken: uni.getStorageSync('token')\r\n\t\t\t},\r\n\t\t\tisTopic: true,\n\t\t\t\n\t\t\t                sourceTypeIndex: 2,\n\t\t\t                sourceType: ['拍照', '相册', '拍照或相册'],\n\t\t\t                sizeTypeIndex: 2,\n\t\t\t                sizeType: ['压缩', '原图', '压缩或原图'],\n\t\t\t                countIndex: 8,\n\t\t\t                count: [1, 2, 3, 4, 5, 6, 7, 8, 9],\n\t\t\timgAllUrl:[],\r\n\t\t};\r\n\t},\r\n\tonLoad(options) {\n\t\tconsole.log(this.userInfo);\n\t\tthis.if_login();\r\n\t\tthis.form.type = options.type;\r\n\t\tconsole.log(options);\r\n\t\tif (options.is_topic) {\r\n\t\t\tthis.isTopic = options.is_topic;\r\n\t\t}\r\n\r\n\t\tif (options.topic_id) {\r\n\t\t\tthis.form.topic_id = options.topic_id;\r\n\t\t\tthis.isTopic = false;\r\n\t\t}\r\n\t\tif (options.discuss_id) {\r\n\t\t\tthis.form.discuss_id = options.discuss_id;\r\n\t\t}\r\n\r\n\t\tlet location = uni.getStorageSync('location_info');\r\n\t\tthis.form.longitude = location.longitude;\r\n\t\tthis.form.latitude = location.latitude;\r\n\t},\r\n\tmethods: {\n\t\tif_login(){\n\t\t\tif(!this.hasLogin){//如果没有登陆则提示要登陆。 或者直接去登陆页面。\n\t\t\t\tconsole.log('没有登陆。请登陆！');\t\t\t\t\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl: '/pages/public/login'\n\t\t\t\t})\n\t\t\t\treturn;\n\t\t\t}\n\t\t},\n\t\taddPic : function(imgAll){\n\t\t\tconsole.log(this.imgAllUrl);\n                // this.imgAllUrl = [];\n                let url = \"路径\";\n                var that = this;\n\t\t\t\tconsole.log(this.imagecount);\n                uni.chooseImage({\n                    sourceType: sourceType[this.sourceTypeIndex],\n                    sizeType: sizeType[this.sizeTypeIndex],\n                    count: this.imageList.length + this.count[this.countIndex] > 9 ? 9 - this.imageList.length :\n                        this.count[this.countIndex],\n                    success: (res) => {\n                        this.imageList = this.imageList.concat(res.tempFilePaths);\n                        var imageData = this.imageList\n                        const tempFilePaths = res.tempFilePaths;\n\t\t\t\t\t\tconst uid = this.userInfo['id'];\t\t\t\t\t\t\n\t\t\t\t\t\tconsole.log(uid);\n                        //上传个数循环拿到每一个照片的路径，然后放到一个数组中\n\t\t\t\t\t\t\t\tconsole.log(tempFilePaths);\n\t\t\t\t\t\t\t\ttempFilePaths.forEach(function(item, index) {\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t            var md5 = Sparkmd5.hashBinary(item)//获得文件MD5\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(md5);\t\t\t\t\t\t\t\t\t    \n\t\t\t\t\t\t\t\t\t//that.imgAllUrl.push(item);//这里直接上传。 用md5取名\n\t\t\t\t\t\t\t\t\tutil.uploadFileToTencentClound(md5+'_'+uid,item).then((res)=>{\n\t\t\t\t\t\t\t\t\t\tconsole.log(\"[图片上传]\",res)//这里返回了图片地址\n\t\t\t\t\t\t\t\t\t\t//self.videoInfo.thumb = res//成功\n\t\t\t\t\t\t\t\t\t\tthat.imgAllUrl.push(res);\n\t\t\t\t\t\t\t\t\t\t//\n\t\t\t\t\t\t\t\t\t\t//uni.hideLoading();//隐藏。\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t});\n                      },\n                })\n            },\n            //图片预览\n            previewImage: function(e) {\n                var current = e.target.dataset.src\n                uni.previewImage({\n                    current: current,\n                    urls: this.imageList\n                })\n            },\n            delect(index,e){\n                var that = this;\n                uni.showModal({\n                    title: '提示',\n                    content: '是否删除该图片？',\n                    success: (res) =>{\n                        if (res.confirm) {\n                            //删除数组中指定项\n                            function removeByValue(arr, val) {\n                                for(var i=0; i<arr.length; i++) {\n                                    if(arr[i] == val) {\n                                        arr.splice(i, 1);\n                                        break;\n                                    }\n                                }\n                            }\n                            var forImg = that.imgAllUrl[index];\n                            var imageUrl = that.imageList.splice(forImg, 1)\n                            removeByValue(that.imageList, imageUrl);\n                            //重新赋值\n                            that.imgAllUrl = that.imageList\n                        } \n                    }\n                });\n            },\r\n\t\tchooseVideo() {\r\n\t\t\tvar self = this;\r\n\t\t\tuni.chooseVideo({\r\n\t\t\t\tcount: 1,\r\n\t\t\t\tsourceType: ['camera', 'album'],\r\n\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\tlet viedoPath = res.tempFilePath;\r\n\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\tmask: true,\r\n\t\t\t\t\t\ttitle: '上传中'\r\n\t\t\t\t\t});\n\t\t\t\t\tconsole.log(console.log);\r\n\t\t\t\t\tconsole.log(res);//这里可以保存视频信息。 \n\t\t\t\t\t//res.duration = 时长\n\t\t\t\t\t//res.height  高\n\t\t\t\t\t//res.size 大小\n\t\t\t\t\t//res.width 宽\n\t\t\t\t\t// filename,filePath\n\t\t\t\t\tself.videoInfo.duration = res.duration;\n\t\t\t\t\tself.videoInfo.height = res.height;\n\t\t\t\t\tself.videoInfo.size = res.size;\n\t\t\t\t\tself.videoInfo.width = res.width;\n\t\t\t\t\t//这里可以限制大小。\n\t\t\t\t\tconst uid = self.userInfo['id'];\n\t\t\t\t\tvar picmd5 = Sparkmd5.hashBinary(res.thumbTempFilePath)//获得文件MD5\n\t\t\t\t\t\t\t\tconsole.log(picmd5);\t\t\t\t\t\t\t\t\t    \n\t\t\t\t\t//that.imgAllUrl.push(item);//这里直接上传。 用md5取名\n\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\tutil.uploadFileToTencentClound(picmd5+'_'+uid,res.thumbTempFilePath).then((res)=>{\n\t\t\t\t\t\tconsole.log(\"[修改s视频图片]\",res)//这里返回了图片地址。 后台可以直接做在小程序。 方便上传视频。\n\t\t\t\t\t\tself.videoInfo.thumb = res//成功\n\t\t\t\t\t\t//uni.hideLoading();//隐藏。\n\t\t\t\t\t})\n\t\t\t\t\tconsole.log(self.form);\n\t\t\t\t\tvar vmd5 = Sparkmd5.hashBinary(res.thumbTempFilePath)//获得文件MD5\n\t\t\t\t\t\t\t\tconsole.log(vmd5);\n\t\t\t\t\tutil.uploadFileToTencentClound(vmd5+'_'+uid+'.mp4',res.tempFilePath).then((res)=>{\n\t\t\t\t\t\tconsole.log(\"[修改头像]\",res)//这里返回了视频地址。\n\t\t\t\t\t\tself.form.media.push(res);//成功\n\t\t\t\t\t\tuni.hideLoading();//隐藏。\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\n\t\terrorback(){\n\t\t\tconsole.log('test');\n\t\t},\n\t\ttest2(){\n\t\t\tconsole.log('hehe');\n\t\t},\r\n\t\tuploadImg() {\r\n\t\t\tif (!this.form.topic_id) {\r\n\t\t\t\tthis.$u.toast('请选择圈子');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (!this.form.content) {\r\n\t\t\t\tthis.$u.toast('内容不能为空');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tuni.showLoading({\r\n\t\t\t\tmask: true,\r\n\t\t\t\ttitle: '发布中'\r\n\t\t\t});\r\n\t\t\t//this.$refs.uUpload.upload();\r\n\t\t},\r\n\t\tchooseLocation() {\r\n\t\t\tlet that = this;\r\n\t\t\tuni.chooseLocation({\r\n\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t// console.log('位置名称：' + res.name);\r\n\t\t\t\t\t// console.log('详细地址：' + res.address);\r\n\t\t\t\t\t// console.log('纬度：' + res.latitude);\r\n\t\t\t\t\t// console.log('经度：' + res.longitude);\r\n\t\t\t\t\tthat.form.address = res.name;\r\n\t\t\t\t\tthat.form.latitude = res.latitude;\r\n\t\t\t\t\tthat.form.longitude = res.longitude;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tvideoSubmit() {\r\n\t\t\tif (this.form.media.length == 0) {\r\n\t\t\t\tthis.$u.toast('请上传视频');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (!this.form.topic_id) {\r\n\t\t\t\tthis.$u.toast('请选择圈子');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tuni.showLoading({\r\n\t\t\t\tmask: true,\r\n\t\t\t\ttitle: '发布中'\r\n\t\t\t});\n\t\t\tconsole.log(this.form);\n\t\t\tconsole.log('videoInfo');\n\t\t\tconsole.log(this.videoInfo);\n\t\t\tthis.form.videoInfo = this.videoInfo;\r\n\t\t\tthis.$H.post('post/addPost', this.form).then(res => {\r\n\t\t\t\tif (res.code == 200) {\r\n\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\turl: '/pages/post/video-detail?id=' + res.result.id\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tuni.hideLoading();\r\n\t\t\t});\r\n\t\t},\r\n\t\tsubmit() {\n\t\t\tif (!this.form.topic_id) {\n\t\t\t\tthis.$u.toast('请选择圈子');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tif (!this.form.content) {\n\t\t\t\tthis.$u.toast('内容不能为空');\n\t\t\t\treturn;\n\t\t\t}\r\n\t\t\tuni.showLoading({\r\n\t\t\t\tmask: true,\r\n\t\t\t\ttitle: '发布中'\r\n\t\t\t});\r\n\r\n\t\t\t// let mediaList = [];\r\n\t\t\t// e.forEach(function(item, index) {\n\t\t\t// \tconsole.log(item);\r\n\t\t\t// \tmediaList.push(item.response.url);\r\n\t\t\t// });\r\n\r\n\t\t\t// this.form.media = mediaList;\n\t\t\tthis.form.media = this.imgAllUrl;\r\n\t\t\tconsole.log(this.form);\r\n\t\t\tthis.$H.post('post/addPost', this.form).then(res => {\r\n\t\t\t\tif (res.code == 200) {\r\n\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\turl: '/pages/post/detail?id=' + res.result.id\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tuni.hideLoading();\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.title-input{\r\n\tborder-bottom: 1px solid #F5F5F5;\r\n\tmargin: 20rpx 0;\r\n\tpadding: 20rpx 0;\r\n}\r\n.post-txt {\r\n\twidth: 100%;\r\n\tpadding: 20rpx 0;\r\n\tmin-height: 300rpx;\r\n}\r\n.uni-uploader__img{\n\tborder:0px !important\n}\n.title-input,.post-txt{\n\tpadding-left:20rpx;\n\tpadding-right:20rpx;\n}\r\n.upload-wrap {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\twidth: 180rpx;\r\n\theight: 180rpx;\r\n\tbackground-color: #F5F5F5;\r\n\tmargin-top: 30rpx;\r\n\tborder-radius: 10rpx;\r\n\t.icon{\r\n\t\twidth: 50rpx;\r\n\t\theight: 50rpx;\r\n\t}\r\n\t\r\n\ttext{\r\n\t\tfont-size: 24rpx;\r\n\t}\r\n}\r\n\r\n.upload-video{\r\n\twidth: 180rpx;\r\n\theight: 180rpx;\r\n\tmargin-top: 30rpx;\r\n}\r\n\r\n.choose-item{\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tpadding: 20rpx;\r\n\tborder-bottom: 1px solid #F5F5F5;\r\n\t&:last-child{\r\n\t\tborder: 0;\r\n\t}\r\n\t.txt{\r\n\t\tmargin-left: 20rpx;\r\n\t}\r\n\t.icon{\r\n\t\twidth: 40rpx;\r\n\t\theight: 40rpx;\r\n\t}\r\n\t.u-icon{\r\n\t\tmargin-left: auto;\r\n\t\tcolor: #999;\r\n\t}\r\n\t\r\n\t.add-icon{\r\n\t\tmargin-left: 0;\r\n\t}\r\n}\r\n\r\n.submit-btn{\r\n\tmargin-top: 50rpx;\r\n}\n\n.img-box {\n\t.img {\n\t\twidth: 200rpx;\n\t\theight: 200rpx;\n\t\tposition: relative;\n\t\tmargin-left: 20rpx;\n\t\tmargin-top: 20rpx;\n\n\t\t&:nth-child(3n + 1) {\n\t\t\tmargin-left: 0;\n\t\t}\n\n\t\t.pic {\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t}\n\n\t\t.close {\n\t\t\twidth: 38rpx;\n\t\t\theight: 38rpx;\n\t\t\tposition: absolute;\n\t\t\ttop: -10rpx;\n\t\t\tright: -10rpx;\n\t\t}\n\t}\n\n\t.upload {\n\t\tbackground-color: #f6f6f6;\n\n\t\t.add-pic {\n\t\t\twidth: 100rpx;\n\t\t\theight: 100rpx;\n\t\t}\n\t}\n}\r\n\n\n.u-upload {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    align-items: center;\n}\n.u-list-item {\n    width: 210rpx;\n    height: 210rpx;\n    overflow: hidden;\n    margin: 10rpx;\n    border-radius: 10rpx;\n    border: 1px solid #999;\n    position: relative;\n    border-radius: 10rpx;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n.u-delete-icon{\n    position: absolute;\n    top: 10rpx;\n    right: 10rpx;\n    z-index: 10;\n    background-color: #fa3534;\n    border-radius: 100rpx;\n    width: 44rpx;\n    height: 44rpx;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n\t}\n\t.u-preview-image{\n\t    display: block;\n\t    width: 100%;\n\t    height: 100%;\n\t    border-radius: 10rpx;\n\t}\r\n</style>\r\n","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./add.vue?vue&type=style&index=0&id=2fc6e32b&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./add.vue?vue&type=style&index=0&id=2fc6e32b&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1640942913925\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}