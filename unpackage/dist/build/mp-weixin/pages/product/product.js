(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/product/product"],{"399b":function(e,t,o){"use strict";var n;o.d(t,"b",(function(){return r})),o.d(t,"c",(function(){return s})),o.d(t,"a",(function(){return n}));var r=function(){var e=this,t=e.$createElement;e._self._c},s=[]},"39be":function(e,t,o){"use strict";o.r(t);var n=o("6e29"),r=o.n(n);for(var s in n)"default"!==s&&function(e){o.d(t,e,(function(){return n[e]}))}(s);t["default"]=r.a},4777:function(e,t,o){"use strict";o.r(t);var n=o("399b"),r=o("39be");for(var s in r)"default"!==s&&function(e){o.d(t,e,(function(){return r[e]}))}(s);o("fc19");var i,a=o("f0c5"),c=Object(a["a"])(r["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],i);t["default"]=c.exports},"498c":function(e,t,o){},"6e29":function(t,o,n){"use strict";(function(t){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var r=i(n("a34a")),s=(i(n("72de")),n("26cb"));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var o;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(o=c(e))||t&&e&&"number"===typeof e.length){o&&(e=o);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){throw e})),f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,a=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return i=e.done,e},e:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){a=!0,s=e})),f:function(){try{i||null==o.return||o.return()}finally{if(a)throw s}}}}function c(e,t){if(e){if("string"===typeof e)return u(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}function l(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function f(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?l(Object(o),!0).forEach((function(t){d(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):l(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function d(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function g(e,t,o,n,r,s,i){try{var a=e[s](i),c=a.value}catch(u){return void o(u)}a.done?t(c):Promise.resolve(c).then(n,r)}function p(e){return function(){var t=this,o=arguments;return new Promise((function(n,r){var s=e.apply(t,o);function i(e){g(s,n,r,i,a,"next",e)}function a(e){g(s,n,r,i,a,"throw",e)}i(void 0)}))}}var h=function(){Promise.all([n.e("common/vendor"),n.e("components/pretty-times/pretty-times")]).then(function(){return resolve(n("7092"))}.bind(null,n)).catch(n.oe)},m=function(){n.e("components/share").then(function(){return resolve(n("8d8e"))}.bind(null,n)).catch(n.oe)},b={components:{share:m,times:h},data:function(){return{specClass:"none",specSelected:[],goodsOne:[],favorite:!0,shareList:[],imgList:[],desc:"",specList:[],specChildList:[],buyinfo:[],from:2,begin_time:"",end_time:"",button:!0,canbuy:!0,appointTime:["2021-11-16 15:30:00"],disableTimeSlot:{begin_time:"2021-11-17 11:00:00",end_time:"2021-11-20 11:00:00"}}},onLoad:function(e){var t=this;return p(r.default.mark((function o(){var n;return r.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return console.log("test"),n=e.id,n&&t.$api.msg("点击了".concat(n)),t.loadGoods(n),o.next=6,t.$api.json("shareList");case 6:t.shareList=o.sent,console.log("goods");case 8:case"end":return o.stop()}}),o)})))()},computed:f({},(0,s.mapState)(["hasLogin","userInfo"])),methods:f(f({},(0,s.mapMutations)(["editCart"])),{},{loadGoods:function(e){var t=this;return p(r.default.mark((function o(){var n,s,i,c,u,l;return r.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return console.log("应该把用户信息传过去如果有则获取收藏的"),console.log(JSON.stringify(t.userInfo)),n=t.userInfo,s={id:e,userInfo:n},o.next=6,t.$myRequest({url:"/api/goods/goodsOne",method:"post",data:s});case 6:return i=o.sent,console.log("商品页"),console.log(i.data),t.goodsOne=i.data.res,t.imgList=JSON.parse(i.data.res.image),t.desc=i.data.res.content,t.favorite=i.data.res.collection,console.log("attr_value:"),console.log(i.data.attr_value),c=JSON.parse(i.data.attr_value),console.log(c["specList"]),t.specList=c["specList"],t.specChildList=c["specChildList"],t.specList.forEach((function(e){var o,n=a(t.specChildList);try{for(n.s();!(o=n.n()).done;){var r=o.value;if(r.pid===e.id){console.log("cItem:"+r),t.$set(r,"selected",!0),t.specSelected.push(r);break}}}catch(s){n.e(s)}finally{n.f()}})),o.next=22,t.$myRequest({url:"/api/goods/getAttrInfo",method:"post",data:t.specSelected});case 22:u=o.sent,console.log("getAttrInfo:"),console.log(u.data),console.log("库存信息"),console.log(u.data.stock),l=u.data.stock,t.goodsOne.price=l.price,t.goodsOne.stock=l.stock,console.log("stock:"+l.stock),t.buyinfo=l;case 32:case"end":return o.stop()}}),o)})))()},toggleSpec:function(){var t=this;"show"===this.specClass?(console.log(e),this.specClass="hide",setTimeout((function(){t.specClass="none"}),250)):"none"===this.specClass&&(this.specClass="show")},selectSpec:function(e,t){var o=this;return p(r.default.mark((function n(){var s,i,a;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log("selectSpec:"+JSON.stringify(o.specChildList)),s=o.specChildList,s.forEach((function(e){e.pid===t&&(o.$set(e,"selected",!1),console.log(e))})),o.$set(s[e],"selected",!0),console.log("list[index]:"+JSON.stringify(s[e])),o.specSelected=[],s.forEach((function(e){!0===e.selected&&o.specSelected.push(e)})),console.log("specSelected:"+JSON.stringify(o.specSelected)),n.next=10,o.$myRequest({url:"/api/goods/getAttrInfo",method:"post",data:o.specSelected});case 10:i=n.sent,console.log("getAttrInfo:"),console.log(i.data),console.log("库存信息"),console.log(i.data.stock),a=i.data.stock,o.buyinfo=i.data.stock,o.goodsOne.price=a.price,o.goodsOne.stock=a.stock,console.log("stock.pricc"+a.price),console.log("stock:"+a.stock),o.goodsOne.thumb=a.thumb,console.log("this.goodsOne.thumb:"+o.goodsOne.thumb),a.stock>=1?(o.button=!0,console.log("重置"),console.log(o.button),o.canbuy=!0):(o.button=!1,o.canbuy=!1);case 24:case"end":return n.stop()}}),n)})))()},share:function(){this.$refs.share.toggleMask()},toFavorite:function(){var e=this;return p(r.default.mark((function o(){var n,s,i,a;return r.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(e.if_login(),console.log("收藏与否:"),console.log("this.goodsOne:"+JSON.stringify(e.goodsOne)),console.log(e.favorite),console.log(e.hasLogin),e.hasLogin){o.next=10;break}return console.log("没有登陆。请登陆！"),e.$api.msg("登陆后再收藏"),t.navigateTo({url:"/pages/public/login"}),o.abrupt("return");case 10:return n=e.goodsOne,s=e.userInfo,i={goodsOne:n,userInfo:s},o.next=15,e.$myRequest({url:"/api/goods/collectionGoods",method:"post",data:i});case 15:a=o.sent,console.log(a.data),1==a.data.res.fav?(e.$api.msg("收藏了"),e.favorite=!0):(e.$api.msg("取消收藏"),e.favorite=!1);case 18:case"end":return o.stop()}}),o)})))()},if_login:function(){if(!this.hasLogin)return console.log("没有登陆。请登陆！"),this.$api.msg("登陆后再收藏"),void t.navigateTo({url:"/pages/public/login"})},getTime:function(e){if("show"===this.specClass){console.log(e.beginTime),console.log(e.endTime),this.begin_time=e.beginTime;var o=[],n=this.goodsOne,r=this.userInfo,s=this.buyinfo,i=this.from,a=this.begin_time;console.log("begin_time"),console.log(a),o.push(d({attr_val:s.attr,number:n.number,id:n.id,image:""},"number",1)),console.log("test:"),console.log(o),console.log("goodsData::::"+JSON.stringify(o)),t.navigateTo({url:"/pages/order/createOrder?data=".concat(JSON.stringify({goodsData:o,userInfo:r,from:i,startTime:a}))})}else"none"===this.specClass&&(this.specClass="show")},buy:function(){if(this.if_login(),console.log("buy?"),!this.canbuy)return this.$api.msg("暂时不能预定哦"),0;if(""!==this.begin_time){var e=[],o=this.goodsOne,n=this.userInfo,r=this.buyinfo,s=this.from;this.begin_time;e.push(d({attr_val:r.attr,number:o.number,id:o.id,image:""},"number",1)),console.log("goodsData::::"+JSON.stringify(e)),t.navigateTo({url:"/pages/order/createOrder?data=".concat(JSON.stringify({goodsData:e,userInfo:n,from:s}))})}else this.specClass="show"},rentCart:function(){var e=this;return p(r.default.mark((function o(){var n,s,i,a,c;return r.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(e.if_login(),console.log("这个加入购物车"),e.canbuy){o.next=5;break}return e.$api.msg("库存不足啦"),o.abrupt("return",0);case 5:return n=e.goodsOne,s=e.userInfo,i=e.buyinfo,a={goodsOne:n,userInfo:s,buyinfo:i},o.next=11,e.$myRequest({url:"/api/cart/addCart",method:"post",data:a});case 11:return c=o.sent,console.log("userInfo:::"+JSON.stringify(c.data.userInfo)),console.log(c.data.res),e.editCart(c.data.res),console.log("这里看看看看看"),o.abrupt("return",t.showToast({title:"加入了"}));case 17:case"end":return o.stop()}}),o)})))()},stopPrevent:function(){}})};o.default=b}).call(this,n("543d")["default"])},e01f:function(e,t,o){"use strict";(function(e){o("251e");n(o("66fd"));var t=n(o("4777"));function n(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=o,e(t.default)}).call(this,o("543d")["createPage"])},fc19:function(e,t,o){"use strict";var n=o("498c"),r=o.n(n);r.a}},[["e01f","common/runtime","common/vendor"]]]);